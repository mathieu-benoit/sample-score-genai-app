apiVersion: score.dev/v1b1
metadata:
  name: open-webui
  annotations:
    tags: "open-webui,http,genai,llm,llama"
containers:
  open-webui:
    image: .
    variables:
      OPENAI_API_BASE_URL: "${resources.smollm2.url}"
      OPENAI_API_KEY: "${resources.smollm2.api-key}"
      WEBUI_NAME: "Hello, DMR with Score Compose!"
      WEBUI_AUTH: "true"
    livenessProbe:
      httpGet:
        path: /health
        port: 8080
    readinessProbe:
      httpGet:
        path: /health
        port: 8080
    volumes:
      /app/backend/data:
        source: ${resources.data}
resources:
  data:
    type: volume
  smollm2:
    type: llm-model
    params:
      model: ai/smollm2:135M-Q2_K
service:
  ports:
    tcp:
      port: 8080
      targetPort: 8080